<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.effect.DropShadow?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.2"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.airline.reservation.ui.CancellationController"
            style="-fx-background-color: linear-gradient(to bottom right, #f6f8fb 0%, #ffffff 40%, #f8fafc 100%);">

    <!-- TOP BAR  -->
    <top>
        <HBox spacing="16"
              style="-fx-padding:18 22; -fx-background-color: transparent; -fx-alignment:center-left;">
            <VBox spacing="2">
                <Label text="AirLink" style="-fx-font-size:18px; -fx-font-weight:800; -fx-text-fill:#0b2447; -fx-font-family: 'Segoe UI Semibold';"/>
                <Label text="Reservation System" style="-fx-font-size:10px; -fx-text-fill:#6b7280;"/>
            </VBox>

            <Region HBox.hgrow="ALWAYS"/>

            <HBox spacing="10" alignment="CENTER">
                <Button text="â† Back" onAction="#handleBack"
                        style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-text-fill:#374151; -fx-font-size:13; -fx-padding:8 12;"/>
                <Button text="Show All" onAction="#handleShowAll"
                        style="-fx-background-color: linear-gradient(to bottom, #3b82f6, #0ea5e9); -fx-text-fill: white; -fx-padding:8 16; -fx-background-radius:10; -fx-font-weight:600; -fx-effect: dropshadow(gaussian, rgba(14,165,233,0.18), 8, 0.1, 0, 3);"/>
            </HBox>
        </HBox>

        <Separator style="-fx-background-color: transparent; -fx-padding: 0 0 8 0; -fx-border-color: transparent;"/>
    </top>

    <!--  MAIN CONTENT  -->
    <center>
        <VBox spacing="18" style="-fx-padding:26 28;">

            <!-- Search Bar -->
            <HBox spacing="12">
                <TextField fx:id="txtPnr"
                           promptText="Enter booking ID"
                           style="-fx-background-radius:12; -fx-padding:12; -fx-font-size:14; -fx-background-color: white; -fx-border-color:#e6eef8; -fx-border-radius:12; -fx-effect:dropshadow(gaussian, rgba(2,6,23,0.03), 10,0.08,0,2);"/>

                <Button text="Search" onAction="#handleSearch"
                        style="-fx-background-color: linear-gradient(to bottom, #0ea5e9, #0369a1);
                               -fx-text-fill:white; -fx-padding:10 20; -fx-background-radius:12; -fx-font-size:14; -fx-font-weight:600; -fx-effect:dropshadow(gaussian, rgba(3,105,161,0.16), 10,0.08,0,3);"/>

                <Button text="Clear" onAction="#handleClear"
                        style="-fx-background-color: transparent; -fx-border-color:#e6eef8; -fx-border-radius:12; -fx-text-fill:#475569; -fx-padding:10 18; -fx-font-size:14;"/>
            </HBox>

            <!-- Table Container -->
            <VBox spacing="14"
                  style="-fx-background-color:white; -fx-padding:18; -fx-background-radius:14;
                         -fx-border-color:transparent; -fx-effect: dropshadow(gaussian, rgba(2,6,23,0.06), 18, 0.08, 0, 6);">

                <HBox alignment="CENTER_LEFT">
                    <Label text="All Bookings" style="-fx-font-size:16; -fx-font-weight:700; -fx-text-fill:#0f172a;"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label text="Updated now" style="-fx-font-size:11; -fx-text-fill:#6b7280;"/>
                </HBox>

                <TableView fx:id="tableView" prefHeight="300"
                           style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-table-cell-border-color: transparent; -fx-font-size:13;">
                    <columns>
                        <TableColumn fx:id="colId" text="ID" prefWidth="60" style="-fx-alignment:CENTER-LEFT; -fx-font-weight:600;"/>
                        <TableColumn fx:id="colPassengerId" text="Passenger" prefWidth="150" style="-fx-font-weight:600;"/>
                        <TableColumn fx:id="colFlightId" text="Flight" prefWidth="120" style="-fx-font-weight:600;"/>
                        <TableColumn fx:id="colSeat" text="Seat" prefWidth="80" style="-fx-alignment:CENTER; -fx-font-weight:600;"/>
                        <TableColumn fx:id="colClass" text="Class" prefWidth="90" style="-fx-alignment:CENTER; -fx-font-weight:600;"/>
                        <TableColumn fx:id="colDate" text="Date" prefWidth="120" style="-fx-alignment:CENTER; -fx-font-weight:600;"/>
                        <TableColumn fx:id="colPrice" text="Fare" prefWidth="100" style="-fx-alignment:CENTER-RIGHT; -fx-font-weight:600;"/>
                        <TableColumn fx:id="colStatus" text="Status" prefWidth="110" style="-fx-alignment:CENTER; -fx-font-weight:600;"/>
                    </columns>
                </TableView>
            </VBox>

            <!-- Booking Details Card -->
            <VBox fx:id="bookingDetails"
                  spacing="14" visible="false"
                  style="-fx-background-color:white; -fx-padding:18;
                         -fx-background-radius:14;
                         -fx-border-color:#e6eef8;
                         -fx-effect: dropshadow(gaussian, rgba(2,6,23,0.04), 14, 0.08, 0, 5);">

                <HBox alignment="CENTER_LEFT" spacing="12">
                    <VBox>
                        <Label text="Booking Details" style="-fx-font-size:18; -fx-font-weight:800; -fx-text-fill:#0b2447;"/>
                        <Label text="Details &amp; refund preview" style="-fx-font-size:11; -fx-text-fill:#6b7280;"/>
                    </VBox>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label text="PNR" style="-fx-font-size:12; -fx-text-fill:#94a3b8; -fx-font-weight:600;"/>
                    <Label fx:id="lblPnr" style="-fx-font-size:14; -fx-font-weight:700; -fx-text-fill:#0b2447;"/>
                </HBox>

                <GridPane hgap="18" vgap="10">
                    <Label text="Passenger:" GridPane.rowIndex="0" GridPane.columnIndex="0" style="-fx-text-fill:#374151; -fx-font-weight:600;"/>
                    <Label fx:id="lblPassenger" GridPane.rowIndex="0" GridPane.columnIndex="1" style="-fx-text-fill:#0b2447;"/>

                    <Label text="Flight:" GridPane.rowIndex="1" GridPane.columnIndex="0" style="-fx-text-fill:#374151; -fx-font-weight:600;"/>
                    <Label fx:id="lblFlight" GridPane.rowIndex="1" GridPane.columnIndex="1" style="-fx-text-fill:#0b2447;"/>

                    <Label text="Date:" GridPane.rowIndex="2" GridPane.columnIndex="0" style="-fx-text-fill:#374151; -fx-font-weight:600;"/>
                    <Label fx:id="lblDate" GridPane.rowIndex="2" GridPane.columnIndex="1" style="-fx-text-fill:#0b2447;"/>

                    <Label text="Fare:" GridPane.rowIndex="3" GridPane.columnIndex="0" style="-fx-text-fill:#374151; -fx-font-weight:600;"/>
                    <Label fx:id="lblOriginalFare" GridPane.rowIndex="3" GridPane.columnIndex="1" style="-fx-text-fill:#0b2447;"/>

                    <Label text="Refund:" GridPane.rowIndex="4" GridPane.columnIndex="0" style="-fx-text-fill:#374151; -fx-font-weight:600;"/>
                    <Label fx:id="lblRefund" GridPane.rowIndex="4" GridPane.columnIndex="1" style="-fx-text-fill:#059669; -fx-font-weight:700;"/>
                </GridPane>

                <HBox alignment="CENTER_RIGHT" spacing="12">
                    <Button text="Close" onAction="#handleClear"
                            style="-fx-background-color: transparent; -fx-border-color:#e6eef8; -fx-padding:9 18; -fx-border-radius:10; -fx-text-fill:#374151;"/>
                    <Button text="Cancel Ticket" onAction="#handleCancel"
                            style="-fx-background-color: linear-gradient(to bottom, #ef4444, #dc2626); -fx-text-fill:white; -fx-padding:10 20; -fx-background-radius:12; -fx-font-weight:700; -fx-effect: dropshadow(gaussian, rgba(220,38,38,0.16), 10, 0.08, 0, 3);"/>
                </HBox>
            </VBox>

        </VBox>
    </center>
</BorderPane>
